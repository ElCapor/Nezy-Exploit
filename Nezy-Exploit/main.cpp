#include <iostream>
#include <Windows.h>
#include <string>
#include <thread>
#include <vector>
#include <mutex>

#include "Execution.hpp"
#include "Bypass.hpp"


void launch()
{
	std::thread(Bypass::bypass_thread).detach();

	roblox_state = LuaState::get_robloxstate();
	Lua::r_securitylevel(roblox_state, 8);

	Execution::execute(roblox_state, "warn('nezy exploit loaded!')");

	std::thread(Execution::pipe).detach();
}


int __stdcall DllMain(void* Module, DWORD Reason, void* Reserve)
{
	if (Reason == 1)
	{
		std::thread(launch).detach();
	}
	return true;
}