#include <iostream>
#include <Windows.h>
#include <string>
#include <thread>
#include <vector>
#include <mutex>

#include "Retcheck.hpp"


uintptr_t roblox_state;

namespace Addresses
{
	using r_lua_newthread_t = uintptr_t(__cdecl*)(uintptr_t rs);
	auto r_lua_newthread = retcheck<r_lua_newthread_t>(aslr(0x18AB3D0));


	using r_luau_load_t = uintptr_t(__cdecl*)(uintptr_t rs, const char* chunk, const char* bytecode, int bytecode_size, int env);
	auto r_luau_load = retcheck<r_luau_load_t>(aslr(0x18AE510));


	using r_lua_getscheduler_t = uintptr_t(__cdecl*)();
	auto r_lua_getscheduler = retcheck<r_lua_getscheduler_t>(aslr(0xDD4450));


	using r_lua_getstate_t = uintptr_t(__thiscall*)(uintptr_t script_context, int* state_type);
	auto r_lua_getstate = retcheck<r_lua_getstate_t>(aslr(0x9EEDA0));


	using r_lua_print_t = uintptr_t(__cdecl*)(int type, const char* source);
	auto r_lua_print = retcheck<r_lua_print_t>(aslr(0x95E710));


	using r_lua_taskdefer_t = uintptr_t(__cdecl*)(uintptr_t rs);
	auto r_lua_taskdefer = retcheck<r_lua_taskdefer_t>(aslr(0x9EA560));
}